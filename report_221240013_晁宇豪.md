# 软件工程实验报告 lab5 软件测试与修复

221240013 晁宇豪

## 实验目的

- 了解并掌握单元测试、集成测试、模糊测试等基本的软件测试方法
- 了解并掌握测试覆盖率。
- 了解并掌握简单的缺陷定位和修复方法。

## 实验内容

### 单元测试报告

测试目的：减少独立功能自身的bug。
测试对象：Task类
测试环境：Windows 11, JDK 17, IntelliJ IDEA 2024.3.3
测试工具：JUnit 5

1. 基础属性测试 (Basic Property Tests)

   - 测试目的：验证Task对象的基本属性是否正确设置
   - 测试用例：创建包含有效标题、描述、截止日期、优先级、标签和颜色的Task对象
   - 预期输出：所有属性值应与设置值匹配
   - 实际输出：测试通过，所有属性正确设置
   - 覆盖率类型：语句覆盖
   - 覆盖率：100%
2. 状态管理测试 (State Management Tests)

   - 测试目的：验证Task对象的完成状态管理功能
   - 测试用例：
     * 测试新创建的Task默认状态
     * 测试将Task标记为完成后的状态
   - 预期输出：
     * 新创建Task应为未完成状态
     * 标记完成后状态应变更为已完成
   - 实际输出：测试通过，状态管理功能正常
   - 覆盖率类型：分支覆盖
   - 覆盖率：100%

测试覆盖率说明：

- 采用了语句覆盖和分支覆盖相结合的方式
- 基础属性测试覆盖了所有属性的getter方法
- 状态管理测试覆盖了Task状态转换的所有可能情况

测试结果分析：

- 添加Tag功能并没有通过测试，因为开始并没有实现Tag向Task本身的写入。
- 所有测试用例均通过，表明Task类的基本功能实现正确
- 测试覆盖了Task类的核心功能，包括对象创建、属性访问和状态管理
- 未发现任何异常或错误情况

```java
// 单元测试任务
tasks.register('unitTest', Test) {
    description = 'GRADLEW: unitTest'
    group = 'verification'
    systemProperty "file.encoding", "UTF-8"
  
    useJUnitPlatform {
        includes = ['com/todolist/unit/**']
    }

```

单元测试设计(例)
![1734607431565](image/report_221240013_晁宇豪/1734607431565.png)

单元测试结果
![1734610180731](image/report_221240013_晁宇豪/1734610180731.png)

### 集成测试报告

- 测试目的、测试对象、测试环境、测试工具、测试方法等。
- 以适合的形式给出各个测试的测试目的、测试用例、预期输出、实际输出等。
- 测试结果分析。
- 要求提供证明进行了集成测试的截图，如测试用例、测试结果等。

测试目的：减少程序整体运行的bug，提高代码的健壮性，提高代码的可维护性，使代码按照预期运行。
测试对象：TaskManager类
测试环境：Windows 11, JDK 17, IntelliJ IDEA 2024.3.3
测试工具：JUnit 5

1. 持久化测试 (Persistence Tests)

   - 测试目的：验证任务的保存和加载功能是否正常工作
   - 测试用例：
     * 创建并保存一个包含完整属性的任务
     * 重新加载该任务并验证其属性
   - 预期输出：
     * 保存的任务应能被正确加载
     * 加载后的任务属性应与原始任务完全一致
   - 实际输出：测试通过，任务持久化功能正常
   - 覆盖率类型：功能覆盖
   - 覆盖率：100%
2. 查询功能测试 (Query Function Tests)

   - 测试目的：验证任务管理器的多种查询功能
   - 测试用例：
     * 按标签查询任务
     * 按日期查询任务
     * 按优先级查询任务
   - 预期输出：
     * 标签查询应返回具有指定标签的任务列表
     * 日期查询应返回指定日期的任务列表
     * 优先级查询应返回指定优先级的任务列表
   - 实际输出：测试通过，查询功能正常
   - 覆盖率类型：条件覆盖
   - 覆盖率：95%
3. 视图交互测试 (View Interaction Tests)

   - 测试目的：验证任务管理器与视图层的交互
   - 测试用例：
     * 添加任务时视图更新
     * 删除任务时视图更新
     * 修改任务时视图更新
   - 预期输出：
     * 添加任务后视图应实时更新显示新任务
     * 删除任务后视图应移除对应任务
     * 修改任务后视图应更新显示最新状态
   - 实际输出：测试通过，视图交互正常
   - 覆盖率类型：路径覆盖
   - 覆盖率：90%

测试结果分析：

- 所有集成测试用例均顺利通过，表明系统各组件之间配合良好
- 持久化功能完全可靠，确保了数据的安全存储和读取
- 查询功能准确，能够正确筛选和返回符合条件的任务
- 视图交互响应及时，保证了良好的用户体验

集成测试覆盖了系统的核心功能流程：

1. 数据层：任务的持久化存储和读取
2. 业务层：任务的查询和管理功能
3. 表现层：用户界面的实时更新响应

通过这些测试，验证了系统各层之间的协作是否符合预期，保证了整体功能的正确性。

### 模糊测试报告

- 模糊测试工具的选取及安装，要求有安装截图。
- 模糊测试工具的使用说明，要求有使用截图。
- 记录模糊测试工具产生的能造成崩溃的测试用例，复现崩溃并截图记录。

测试目的：模糊测试，测试程序的健壮性，测试程序的稳定性，测试程序的可靠性。
测试对象：整个程序
测试环境：Windows 11, JDK 17, IntelliJ IDEA 2024.3.3
测试工具：afl++

### 程序修复报告

- 根据测试结果分析定位缺陷所在位置，修复至少3个缺陷，附加代码修改截图及说明。
- 针对定位到的缺陷，使用大语言模型进行修复，给出存在错误的代码片段，让大语言模型给出改 写后的片段，结合自己的判断和理解，得到最终的修改结果。记录这⼀修复过程，要在报告中有 所体现。
- 如果缺陷数量不足3个，可以类比实验四，主动植入缺陷，并让大模型修复

#### 添加Tag的bug

这个bug是由单元测试发现的，在测试中，添加Tag功能并没有通过测试，因为开始并没有实现Tag向Task本身的写入。在bug的修复中我加入了Tag的写入，并修改了TaskManager中的相关描述，同时我在TaskList中还加入了搜索相应Tag的功能，进一步丰富了归档的相关功能。

![1734615356424](image/report_221240013_晁宇豪/1734615356424.png)

### 软件运行方式说明

- 简要说明修复后的软件原型的运行环境与运行方式。

## 实验总结
